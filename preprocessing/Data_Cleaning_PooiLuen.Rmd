---
title: "WQD7004--Group Assignment--DataCleaning"
author: "Thoo Pooi Luen"
date: '2022-04-27'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Part 1. Data Cleaning
```{r}
## library 
library(dplyr)
library(tidyverse)
#library(stringr) # to trim dirty character
library(stringi) # to trim dirty character 
```

# Task 1: Preparation
## 1. Import raw dataset that come with respective subject label for further action.
```{r}
student_mat <- read.csv("../data/student-mat.csv",
                        sep = ";", 
                        stringsAsFactors = TRUE)

student_mat <- mutate(student_mat, subject = 'mat')


student_por <- read.csv("../data/student-por.csv",
                        sep = ";", 
                        stringsAsFactors = TRUE)

student_por <- mutate(student_por, subject = 'por')
```

## 2. Create a merged dataset for further action
```{r}
combined_data<- rbind(student_mat, student_por, stringsAsFactors = TRUE)
```

## 3. Determine the data type of loaded data 
```{r}
typeof(combined_data)
class(combined_data)
```

# Task 2: Refine row data format for each column
## 1. Display the first 5 rows of data from newly created data frame 
```{r}
head(combined_data,5)
```

## 2a. Trim unwanted space and character for all rows in data frame, then display the first 5 row of the trimmed output
```{r}
#head(apply(combined_data, 2, stri_trim_both, pattern = '[^"\\ $]'),5)
```
## 2b. Prepare trim function to discard unwanted characters based on column number 
```{r}
## i remain this because the trim function above seems applied to all columns
column_number <- 12:22

n <- min(column_number)
while (n < max(n)){
  selected_row <- column_number[[n+1]]
  output <- stri_trim_both(selected_row, pattern = '[^"\\ $]')
  print(output)
  
  n <- n+1
  
  if (n == max(n)){
    selected_row <- column_number[[n+1]]
    output <- stri_trim_both(selected_row, pattern = '[^"\\ $"]')
    print(output)
    break
  }
}
```

## 3. View the trimmed data using Data Viewer in R to cross check trimming output 
```{r}
view(combined_data)
```


## 4. Check on trimmed column again.
```{r}
head(combined_data,5)
```
# Part 2: Exploratory Data Analysis (EDA)
## 1. Print out data summary 
```{r}
summary(combined_data)
```

```{r}
str(combined_data)
```

```{r}
## for self double check
## write.csv(combined_data, "../preprocessing/combined_data.csv", row.names = FALSE)
```